# Recolor Tool #

> [!NOTE]
> A new version is in the works - user interface, as well as some of the tools code, has been completely rewritten. A temporary web-app version has been released with almost identical functionality until the refactored app is ready to be published.
> 


![recolortool_webapp](https://github.com/user-attachments/assets/47b19aa6-74a1-41d4-8633-b75ca92c9e9c)



## Summary

> [!Important]
> The web-app implementation is a temporary fix to the original version being deprecated due to change in the gui platform license. It is cobbled together with the help of stack-overflow, google searching and yes, gemini, because I have only so many hours left in a day to track down error messages before I end up crying in a corner.

This version is a minimal Python and Flask based web application running directly in your local browser and using only your local storage - the files you "upload" into the tool never leave your computer. 

The app is designed to generate recolored versions of PNG images based on a user-provided color map. The color map can be provided either as a manually created CSV file or generated automatically from a specially formatted PNG image containing color palette swatches. The ‘examples’ folder contains a sample of both input and output files generated by the tool.

## Prerequisites
- any recent web browser should work

## Features

- Recolor PNG images using a CSV color map.
- Generate color map CSV files from PNG images containing color palettes.
- Windows executable (single file .exe) is available in the releases

## Getting Started

You can download a Windows OS executable version from latest releases, or download/fork the repo and extract the Recolor Tool directory to run the Python code in your own environment setup - requirements.txt is included for a quick start.

### Using the Windows Executable

1. Find the latest release of the Image Recolor Tool at [Releases](https://github.com/Teaiscoldagain/StardewUtilities/releases). 
2. Donwload to a location of your choice.
3. Run the `recolortool.exe` executable.

## Usage

### 1. Color Map Generation - OPTIONAL

If you don't have an existing csv colormap, and you'd rather not create one manually, you can upload a png file in the below format and have the app generate one for you - you do NOT need to do this if you are reusing one you previously generated.

Prepare a PNG image containing your color palette. The image should consist of columns of 4x4 pixel squares, where each square represents a color in your palette. The columns should be arranged from LEFT to RIGHT, with the left-most column representing your base image colors, which the tool will then substitute with a recolor equivalent on the same row.

![Color map input png guide](https://i.imgur.com/q4MINjb.png "Map input png guide")    

![image](https://github.com/user-attachments/assets/2b64491a-c4bf-43f9-8aaf-6964f57d7859)    

    
### 2. Recolor Generator

#### Upload Base PNG Image - REQUIRED

Click to browse and upload the png image you want to recolor


#### Upload Color Map CSV - OPTIONAL

1. If you have an existing csv color map you'd like to re-use you can upload it here (this means you DON'T need to generate one again from a png image
2. If you DON'T yet have a csv color map you can use the tool above (Color Map Generation) - when you generate a color map this way the app can re-use the most recently created map automatically
3. Alternatively you can create one manually using instructions below

### Manually Creating the Color Map CSV - OPTIONAL

1. Create a CSV file named `color_map.csv` in your selected output folder.
2. The CSV file should be structured as follows:
    - The first column contains the base colors (in hexadecimal format, e.g., `#FF0000` for red).
    - Subsequent columns represent different color palettes. The first row of each palette column is the column index (an integer, starting with 0). Subsequent rows contain the new colors for each base color, also in hexadecimal format.
    
    Example:
    
    ```
    0,1,2
    #FF0000,#00FF00,#0000FF
    #00FF00,#0000FF,#FF0000
    #0000FF,#FF0000,#00FF00
    
    ```

###  Generate Recolors

1. Click the "Generate Recolors" button. The recolored images will be saved in a zip file
2. If the files provided contained properly formatted input you will see a confirmation "Recolors generated successfully!"
3. Click on the Download Recolored Images (ZIP)

![image](https://github.com/user-attachments/assets/5ef103a0-0860-4ed9-b7de-ee711b9e1fdb)


### Start Over

You can click the Start Over button at the top of the screen at any time to clear any uploaded files and start again.

## Examples

Example images are provided with the windows tool download, or can be grabbed directly from the repo

- [Example Color Map Input PNG]()
- [Example Base Image]()
- [Example color_map.csv]()

## License

[MIT License](LICENSE) 

## Issues

Please report any bugs or issues on the [GitHub Issues](https://github.com/Pixeltica/PixelModTools/issues) page.

## Contact

Best way to contact me is to reach out on Discord (@teaiscoldagain) on the main Stardew Valley Discord server.
